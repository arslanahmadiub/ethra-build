(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1007:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),r=a(53),l=a(7),i=a(5),c=a(30),o=a(31),m=a(33),d=a(32),u=a(34),p=a(0),f=a.n(p),g=a(23),b=a.n(g),N=a(45),h=a(148),E=a.n(h),v=a(569),_=a.n(v),S=a(539),D=a(538),C=a(554),k=a(568),x=a(266),O=a(560),w=a(597),j=a(555),L=a(563),A=a(18),I=a(657),y=a(57),P=a(193),F=a(192),T=a(629),Y=a(574),B=a(124),V=a(22),R=a(48),M=a(744),U=function(e){var t=e.item,a=Object(A.s)(V.c.BILLING_STATUS_INFO,t.status);return f.a.createElement("tr",{className:"invoice"},f.a.createElement("td",{className:"text-center"},Object(A.h)(t.createdAt,"MM/DD/YYYY")),f.a.createElement("td",{className:"text-center"},f.a.createElement(R.b,{to:"/provider/billings/booking-invoice/detail/".concat(t.id)},"#",t.invoiceNumber)),f.a.createElement("td",{className:"text-center"},Object(A.h)(t.dueDate,"MM/DD/YYYY")),f.a.createElement("td",{className:"text-center"},f.a.createElement(M.a,{color:"",className:"badge-dot mr-4"},f.a.createElement("i",{className:"bg-".concat(a.color)}),f.a.createElement("span",{className:"status"},a.status||"Unknown"))),f.a.createElement("td",{className:"table-actions text-center"},Object(A.b)(t.totalAmount)))},G=(a(779),function(){return{dropdownStatusName:"All Status",status:"",isLoading:!0,isOpenSideBar:!1,dropdownStatusOpen:!1,checkVoidStatus:!1,start_date:"",end_date:""}}),z=function(){return{limit:10,offset:0,selected:0,desc:!1,status:""}},H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChangeFilterStatus=function(e,t){var n=e.target,s=n.value,r=n.name;"status"===r&&(Number(s)===V.c.BILLING_STATUS.VOID?a.setState({checkVoidStatus:!0}):a.setState({checkVoidStatus:!1})),a.setState({dropdownStatusName:t}),a.filters[r]=s,a.resetFilterData(),a.props.getList(a.filters)},a.handleFilterVoidBilling=function(e){var t=e.target.checked;t?(a.filters.status=V.c.BILLING_STATUS.VOID,a.setState({dropdownStatusName:"Void created"})):(a.filters.status="",a.setState({dropdownStatusName:"All Status"})),a.setState({checkVoidStatus:t}),a.resetFilterData(),a.props.getList(a.filters)},a.filter=function(){var e=a.state,t=e.start_date,n=e.end_date;a.filters=Object(i.a)({},a.filters,{start_date:t?Object(A.f)(t._d):"",end_date:n?Object(A.f)(n._d):""}),a.resetFilterData(),a.props.getList(a.filters)},a.sort=function(e){var t=e.target.attributes.name.value;t&&t===a.filters.ordering?a.filters.desc=!a.filters.desc:(a.filters.ordering=t,a.filters.desc=!0),a.resetFilterData(),a.props.getList(a.filters)},a.handleReactDatetimeChange=function(){var e=Object(l.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.state.start_date&&"end_date"===t&&new Date(a.state.start_date._d+"")>new Date(n._d+""))){e.next=6;break}return e.next=3,a.setState({start_date:n,end_date:n});case 3:a.filter(),e.next=15;break;case 6:if(!(a.state.end_date&&"start_date"===t&&new Date(a.state.end_date._d+"")<new Date(n._d+""))){e.next=12;break}return e.next=9,a.setState({start_date:n,end_date:n});case 9:a.filter(),e.next=15;break;case 12:return e.next=14,a.setState(Object(r.a)({},t,n));case 14:a.filter();case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getClassNameReactDatetimeDays=function(e){if(a.state.start_date&&a.state.end_date,a.state.start_date&&a.state.end_date&&a.state.start_date._d+""!==a.state.end_date._d+""){if(new Date(a.state.end_date._d+"")>new Date(e._d+"")&&new Date(a.state.start_date._d+"")<new Date(e._d+""))return" middle-date";if(a.state.end_date._d+""===e._d+"")return" end-date";if(a.state.start_date._d+""===e._d+"")return" start-date"}return""},a.selectPageSize=function(e){var t=e.target.value;t&&(a.resetFilterData(),a.setState({isOpenSideBar:!1,tickCheckAll:!1}),a.filters.limit=t,a.props.getList(a.filters))},a.selectPage=function(e){var t=e.selected;a.filters.selected=t||0,a.filters.offset=Math.ceil(t*a.filters.limit),a.setState({isOpenSideBar:!1,tickCheckAll:!1}),a.props.getList(a.filters)},a.resetFilterData=function(){a.filters.offset=0,a.filters.selected=0},a.clearFilterData=function(){a.filters=z(),a.setState(G()),a.props.getList(a.filters)},a.toggleSelectStatus=function(){a.setState({dropdownStatusOpen:!a.state.dropdownStatusOpen})},a.exportCSV=Object(l.a)(s.a.mark(function e(){var t,n,r,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.bookingInvoiceData.result,n=Object(A.k)(t,V.c.BILLING_EXPORT_CSV_CODE.PROVIDER_BOOKING_INVOICE),r=String(b()().valueOf()),l={filename:r,fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0},new T.ExportToCsv(l).generateCsv(n);case 6:case"end":return e.stop()}},e)})),a.state=G(),a.filters=z(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getList(this.filters);var e=y.a.getUserInfo();this.props.getDetail(e.user_id);this.props.getInvoiceDetail("preview-invoice")}},{key:"render",value:function(){var e=this,t=this.props,a=t.bookingInvoiceData,n=t.loading,s=t.providerData,r=t.bookingInvoiceDetail,l=Object(I.a)(r.result),i=Object(I.e)(l),c=this.state,o=(c.dropdownStatusName,c.dropdownStatusOpen,a.result),m=this.filters,d=m.limit,u=m.selected,p=Math.ceil(a.count/d)||0,g=((u+1)*d<a.count||a.count,a.count,{totalPage:p,selected:this.filters.selected}),b={title:this.filters.ordering,value:this.filters.desc,get:function(e){return this.title===e?"sort ".concat(this.value?"sort-desc":"sort-asc"):"sort"}};return f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{className:"list-invoice"},f.a.createElement(D.a,{className:"d-flex justify-content-md-end justify-content-center mt-3"},f.a.createElement(S.a,{md:6,className:"d-flex justify-content-md-start"},f.a.createElement("ul",{className:"d-flex flex-column current-amount"},f.a.createElement("b",null,"This week's balance: $",Object(A.b)(i)),f.a.createElement(R.b,{to:"/provider/billings/booking-invoice/detail/preview-invoice",className:"mt-3"},f.a.createElement("b",{className:"cursor-pointer"},"Preview this week's invoice")))),f.a.createElement(S.a,{md:6,className:"d-flex justify-content-md-end"},f.a.createElement("ul",{className:"d-flex flex-column current-amount"},f.a.createElement("b",null,"Ethera Credit: $",s&&s.etheraCredit),f.a.createElement("b",null,"Promo Credit: $",s&&s.promoCredit),f.a.createElement("b",null,"Remaining Cancellations:"," ",s&&s.cancelationBalance)))),f.a.createElement(C.a,null,n&&f.a.createElement(B.a,null),f.a.createElement(k.a,{className:"bg-transparent border-0"},f.a.createElement(D.a,{className:"d-flex justify-content-between align-items-center"},f.a.createElement(S.a,{className:"d-flex justify-content-center justify-content-lg-start",xl:5,lg:6,xs:12},f.a.createElement(D.a,{className:"align-items-center"},f.a.createElement(S.a,{xs:12,sm:5},f.a.createElement(_.a,{className:"custom-date-input",inputProps:{placeholder:"-- start date --"},closeOnSelect:!0,value:this.state.start_date,timeFormat:!1,dateFormat:"MM/DD/YYYY",onChange:function(t){return e.handleReactDatetimeChange("start_date",t)},renderDay:function(t,a,n){var s=t.className;return s+=e.getClassNameReactDatetimeDays(a),f.a.createElement("td",Object.assign({},t,{className:s}),a.date())}})),f.a.createElement("b",{className:"d-sm-block d-none"},"-"),f.a.createElement(S.a,{xs:12,sm:5},f.a.createElement(_.a,{className:"custom-date-input",inputProps:{placeholder:"-- end date --"},closeOnSelect:!0,value:this.state.end_date,timeFormat:!1,dateFormat:"MM/DD/YYYY",onChange:function(t){return e.handleReactDatetimeChange("end_date",t)},renderDay:function(t,a,n){var s=t.className;return s+=e.getClassNameReactDatetimeDays(a),f.a.createElement("td",Object.assign({},t,{className:s}),a.date())}})),f.a.createElement(S.a,{sm:1,className:"d-sm-block d-none"},f.a.createElement("i",{className:"fas fa-calendar-alt"})))),f.a.createElement(S.a,{className:"d-flex justify-content-center justify-content-xl-end mt-lg-3 mt-xl-0",xl:3,lg:12,xs:12},f.a.createElement(D.a,{className:"align-items-center"},f.a.createElement(x.a,{className:"mr-lg-3",color:"primary",size:"sm",onClick:this.exportCSV,disabled:o&&0===o.length},f.a.createElement("span",{className:"btn-inner--text"},"Export CSV"))))))),f.a.createElement(C.a,null,f.a.createElement(O.a,null,f.a.createElement(w.a,{className:"align-items-center table-sort",responsive:!0},f.a.createElement("thead",{className:"thead-light"},f.a.createElement("tr",null,f.a.createElement("th",{className:"text-center ".concat(b.get("created_at")),name:"created_at",onClick:this.sort},"Date Created"),f.a.createElement("th",{className:"text-center"}," Invoice number "),f.a.createElement("th",{className:E()("text-center",b.get("due_date")),name:"due_date",onClick:this.sort}," ","Due date"," "),f.a.createElement("th",{className:"table__header__w-170 text-center ".concat(b.get("status")),name:"status",onClick:this.sort}," ","Status"," "),f.a.createElement("th",{className:E()("text-center",b.get("total_amount")),name:"total_amount",onClick:this.sort}," ","Total"," "))),f.a.createElement("tbody",{className:"client"},o&&o.map(function(t,a){return f.a.createElement(U,{key:a,check:e.handleCheckbox,openSideBar:e.toggleSideBar,item:t,setStatus:e.getProviderUpdateStatus,toggleAction:e.toggleAction})})))),o&&o.length>0&&f.a.createElement(D.a,{className:"d-flex justify-content-md-between justify-content-sm-start mb-3 mx-0"},f.a.createElement(S.a,{className:"d-flex justify-content-center"},p>1&&f.a.createElement(Y.a,{setting:g,handleClick:this.selectPage})),f.a.createElement(S.a,{className:"d-flex align-items-baseline mb-md-0 mb-2",xs:"auto"},f.a.createElement(j.a,{onChange:this.selectPageSize,value:d,bsSize:"md",type:"select",name:"selectPageSize",id:"selectPageSize"},f.a.createElement("option",{value:"5"},"5"),f.a.createElement("option",{value:"10"},"10"),f.a.createElement("option",{value:"20"},"20"),f.a.createElement("option",{value:"50"},"50")),f.a.createElement(L.a,{className:"ml-1 text-nowrap"},f.a.createElement("small",null,"Page ","".concat(u+1)," of ","".concat(p))))))))}}]),t}(p.Component),K={getList:F.d,getDetail:P.g,getInvoiceDetail:F.c},$=Object(N.b)(function(e){return{bookingInvoiceData:e.billing.data,loading:e.billing.loading,providerData:e.provider.data,bookingInvoiceDetail:e.billing.detailData}},K)(H);t.default=$},574:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(589),l=a.n(r);a(575);t.a=function(e){var t=e.setting,a=e.handleClick;return s.a.createElement(l.a,{previousLabel:s.a.createElement("i",{className:"fas fa-angle-left"}),nextLabel:s.a.createElement("i",{className:"fas fa-angle-right"}),breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",pageCount:t.totalPage,forcePage:t.selected,marginPagesDisplayed:t.marginPages||1,pageRangeDisplayed:t.pageRange||1,onPageChange:a,containerClassName:"pagination pagination-md",subContainerClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",disabledClassName:"disabled"})}},575:function(e,t,a){},657:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return i}),a.d(t,"e",function(){return c}),a.d(t,"d",function(){return o});var n=a(5),s=(a(632),a(22)),r=function(e){var t=[];return e&&e.forEach(function(e,a){e.prices&&e.prices.forEach(function(a){var s=0===t.length?0:t[t.length-1].totalHours,r=Object(n.a)({},a,e,{totalHours:Number(a.hours)+Number(s)});t.push(r)})}),t},l=function(e){var t=[];return e&&e.forEach(function(e){e.status===s.c.BOOKING_STATUS.CANCELED&&e.prices.forEach(function(a){var s=Object(n.a)({},a,e);t.push(s)})}),t},i=function(e,t,a,n){var r=Number(a)+Number(n);if(Number(e.status)===s.c.BILLING_STATUS.PAID)return{promoApplied:e.appliedPromoCredit,etheraApplied:e.appliedEtheraCredit};if(Number(t)<Number(a)){return{promoApplied:t,etheraApplied:0}}return Number(t)<Number(r)?{promoApplied:a,etheraApplied:Number(t)-Number(a)}:{promoApplied:a,etheraApplied:n}},c=function(e){return e.length>0&&e.map(function(e){return Number(e.price)*Number(e.hours)}).reduce(function(e,t){return e+t})},o=function(e,t){return Number(e)>Number(t.promoApplied)+Number(t.etheraApplied)?Number(e)-(Number(t.promoApplied)+Number(t.etheraApplied)):0}},779:function(e,t,a){}}]);
//# sourceMappingURL=33.e84bdf50.chunk.js.map