(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{568:function(e,t,a){"use strict";var l=a(12),n=a(15),r=a(0),c=a.n(r),o=a(4),s=a.n(o),i=a(14),u=a.n(i),m=a(6),d={tag:m.p,className:s.a.string,cssModule:s.a.object},b=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),s=Object(m.l)(u()(t,"card-header"),a);return c.a.createElement(r,Object(l.a)({},o,{className:s}))};b.propTypes=d,b.defaultProps={tag:"div"},t.a=b},583:function(e,t,a){"use strict";var l=a(12),n=a(15),r=a(0),c=a.n(r),o=a(4),s=a.n(o),i=a(14),u=a.n(i),m=a(6),d={tag:m.p,className:s.a.string,cssModule:s.a.object},b=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),s=Object(m.l)(u()(t,"card-footer"),a);return c.a.createElement(r,Object(l.a)({},o,{className:s}))};b.propTypes=d,b.defaultProps={tag:"div"},t.a=b},597:function(e,t,a){"use strict";var l=a(12),n=a(15),r=a(0),c=a.n(r),o=a(4),s=a.n(o),i=a(14),u=a.n(i),m=a(6),d={className:s.a.string,cssModule:s.a.object,size:s.a.string,bordered:s.a.bool,borderless:s.a.bool,striped:s.a.bool,dark:s.a.bool,hover:s.a.bool,responsive:s.a.oneOfType([s.a.bool,s.a.string]),tag:m.p,responsiveTag:m.p,innerRef:s.a.oneOfType([s.a.func,s.a.string,s.a.object])},b=function(e){var t=e.className,a=e.cssModule,r=e.size,o=e.bordered,s=e.borderless,i=e.striped,d=e.dark,b=e.hover,p=e.responsive,E=e.tag,f=e.responsiveTag,g=e.innerRef,N=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),O=Object(m.l)(u()(t,"table",!!r&&"table-"+r,!!o&&"table-bordered",!!s&&"table-borderless",!!i&&"table-striped",!!d&&"table-dark",!!b&&"table-hover"),a),h=c.a.createElement(E,Object(l.a)({},N,{ref:g,className:O}));if(p){var v=Object(m.l)(!0===p?"table-responsive":"table-responsive-"+p,a);return c.a.createElement(f,{className:v},h)}return h};b.propTypes=d,b.defaultProps={tag:"table",responsiveTag:"div"},t.a=b},633:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});var l=a(5),n=a(658),r=a.n(n),c=(a(632),a(23)),o=a(18),s=function(e,t){var a=new r.a("l","pt"),n={fillColor:[41,128,186],textColor:[255,255,255],fontStyle:"bold"},o=a.internal.pageSize,s=o.width?o.width:o.getWidth();a.text("Billing Invoice",s/2,30,"center"),a.autoTable({html:"#".concat(e),startY:55,didParseCell:function(e){0===e.row.index&&(e.cell.styles=Object(l.a)({},e.cell.styles,n))}}),a.autoTable({html:"#".concat(t),didParseCell:function(e){1===e.row.index&&(e.cell.styles=Object(l.a)({},e.cell.styles,n))}}),a.save("invoice_".concat(String(c().valueOf()),".pdf"))},i=function(e,t,a,n){var s=Object(o.x)(e.provider),i=c(e.bookings&&e.bookings[0].createdAt).startOf("week"),u=c(e.bookings&&e.bookings[0].createdAt).endOf("week"),m=new r.a("l","pt"),d={fillColor:[227,136,91],textColor:[255,255,255],fontStyle:"bold"},b={textColor:[245,54,92]},p=m.internal.pageSize,E=p.width?p.width:p.getWidth(),f="Invoice ".concat(e.invoiceNumber),g=s,N="".concat(Object(o.g)(i)," - ").concat(Object(o.g)(u)),O="TOTAL AMOUNT DUE: "+String(t)+"$";m.text("EtheraPay",E/2,30,"center"),m.text(f,E/2,55,"center"),m.text(g,E/2,80,"center"),m.text(N,E/2,105,"center"),m.autoTable({html:"#".concat(a),startY:120,didParseCell:function(e){var t=e.table.body;e.row.index===t.length-1&&(e.cell.styles=Object(l.a)({},e.cell.styles,d)),"body"===e.section&&e.row.raw.className&&e.row.raw.className.includes("custom-row__cancellation")&&(e.cell.styles=Object(l.a)({},e.cell.styles,b))}}),m.text(O,E/2,m.autoTable.previous.finalY+30,"center"),m.autoTable({html:"#".concat(n),startY:m.autoTable.previous.finalY+50,pageBreak:"always",didParseCell:function(e){var t=e.table.body;e.row.index===t.length-1&&(e.cell.styles=Object(l.a)({},e.cell.styles,d))}}),m.save("Ethera-Pay_".concat(String(c().valueOf()),".pdf"))}},657:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return c}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return s}),a.d(t,"d",function(){return i});var l=a(5),n=(a(632),a(22)),r=function(e){var t=[];return e&&e.forEach(function(e,a){e.prices&&e.prices.forEach(function(a){var n=0===t.length?0:t[t.length-1].totalHours,r=Object(l.a)({},a,e,{totalHours:Number(a.hours)+Number(n)});t.push(r)})}),t},c=function(e){var t=[];return e&&e.forEach(function(e){e.status===n.c.BOOKING_STATUS.CANCELED&&e.prices.forEach(function(a){var n=Object(l.a)({},a,e);t.push(n)})}),t},o=function(e,t,a,l){var r=Number(a)+Number(l);if(Number(e.status)===n.c.BILLING_STATUS.PAID)return{promoApplied:e.appliedPromoCredit,etheraApplied:e.appliedEtheraCredit};if(Number(t)<Number(a)){return{promoApplied:t,etheraApplied:0}}return Number(t)<Number(r)?{promoApplied:a,etheraApplied:Number(t)-Number(a)}:{promoApplied:a,etheraApplied:l}},s=function(e){return e.length>0&&e.map(function(e){return Number(e.price)*Number(e.hours)}).reduce(function(e,t){return e+t})},i=function(e,t){return Number(e)>Number(t.promoApplied)+Number(t.etheraApplied)?Number(e)-(Number(t.promoApplied)+Number(t.etheraApplied)):0}},957:function(e,t,a){},995:function(e,t,a){"use strict";a.r(t);var l=a(76),n=a(0),r=a.n(n),c=a(23),o=a(44),s=a.n(o),i=a(539),u=a(554),m=a(568),d=a(538),b=a(266),p=a(597),E=a(583),f=a(192),g=a(18),N=a(657),O=a(633),h=a(124),v=a(22),j=(a(957),function(e){var t=e.cancellations,a=e.totalCancellationBookings;return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"11"})),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-left",colSpan:"10"},r.a.createElement("h3",{className:"text-danger"},r.a.createElement("b",null,"Cancellations")))),t.map(function(e,t){var a=e.bookingNumber,l=e.hours,n=e.cancelDate,c=e.price,o=e.space,s=a||"#########",i=Object(g.g)(n),u=o.name,m=Number(c)*Number(l);return r.a.createElement("tr",{className:"custom-row__cancellation",key:t},r.a.createElement("td",null),r.a.createElement("td",{colSpan:"3"},"#",s),r.a.createElement("td",null," ",i),r.a.createElement("td",null,u),r.a.createElement("td",null,"$",Object(g.b)(c)," "),r.a.createElement("td",{colSpan:"2"},Object(g.b)(l)),r.a.createElement("td",null,"$",Object(g.b)(m)))}),r.a.createElement("tr",{className:"custom-row__result"},r.a.createElement("td",{className:"text-left text-primary",colSpan:"9"},"Total"),r.a.createElement("td",null,"$",Object(g.b)(a)))))}),k=function(e){var t=e.totalHours,a=e.creditApplied,l=e.totalChargedBookings,n=e.totalCharged;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:"custom-row__result"},r.a.createElement("td",{colSpan:"8"},"Total"),r.a.createElement("td",null,Object(g.b)(t)),r.a.createElement("td",null,"$",Object(g.b)(l))),r.a.createElement("tr",{className:"custom-row__result"},r.a.createElement("td",{colSpan:"9"},"Promo Credit"),r.a.createElement("td",null,"$",Object(g.b)(a.promoApplied))),r.a.createElement("tr",{className:"custom-row__result"},r.a.createElement("td",{colSpan:"9"},"Ethera Credit"),r.a.createElement("td",null,"$",Object(g.b)(a.etheraApplied))),r.a.createElement("tr",{className:"custom-row__result"},r.a.createElement("td",{colSpan:"9"},"Total Charged"),r.a.createElement("td",null,"$",Object(g.b)(n))))},C=a(560),w=function(e){var t=e.openingCreditBalance,a=e.creditApplied,l=e.creditReceived;return r.a.createElement(u.a,null,r.a.createElement(C.a,null,r.a.createElement(p.a,{className:"align-items-center",id:"credit-balance-table",responsive:!0},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center",colSpan:"2"}," ",r.a.createElement("h2",{className:"text-success mt-2"},"Credit Balance")," "))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," Opening Credit Balance"),r.a.createElement("td",null,"$",Object(g.b)(t))),r.a.createElement("tr",null,r.a.createElement("td",null," Credit Applied"),r.a.createElement("td",null,"$",Object(g.b)(a.etheraApplied))),r.a.createElement("tr",null,r.a.createElement("td",null," Credit Received"),r.a.createElement("td",null,"$",Object(g.b)(l))),r.a.createElement("tr",{className:"text-primary custom-row__result"},r.a.createElement("td",null,"Closing Credit Balance"),r.a.createElement("td",null,"$",Object(g.b)(Number(t)-Number(a.etheraApplied)+Number(l))))))))},x=function(e){var t=e.bookingData,a=t.tier,l=t.bookingNumber,n=t.createdAt,c=t.startDate,o=t.hours,s=t.totalHours,i=t.cancelDate,u=t.price,m=t.space,d=t.status,b=l||"#########",p=Object(g.g)(n),E=Object(g.g)(c),f=Object(g.g)(i),N=m.name,O=Number(u)*Number(o),h=d===v.c.BOOKING_STATUS.CANCELED;return r.a.createElement("tr",{className:"".concat(h?"custom-row__cancellation":"")},r.a.createElement("td",null,"Tier: ",a),r.a.createElement("td",null,"#",b),r.a.createElement("td",null,p),r.a.createElement("td",null,E),r.a.createElement("td",null,h?f:""),r.a.createElement("td",null,N),r.a.createElement("td",null,"$",Object(g.b)(u)),r.a.createElement("td",null,Object(g.b)(o)),r.a.createElement("td",null,Object(g.b)(s)),r.a.createElement("td",null,"$",Object(g.b)(O)))},A=a(45),y=a(48),T=c().startOf("date");t.default=function(e){var t=Object(A.c)(),a=Object(n.useState)(!1),o=Object(l.a)(a,2),C=o[0],S=o[1],D=e.match.params.id,_=Object(A.d)(function(e){return e.billing.detailData}),B=Object(A.d)(function(e){return e.billing.loading}),M=Object(A.d)(function(e){return e.navBars.data});Object(n.useEffect)(function(){"preview-invoice"===D&&S(!0),t(Object(f.c)(D))},[]);var P=C?Object(g.x)(M):Object(g.x)(_.provider),$=C?c(T).startOf("week"):c(_.bookings&&_.bookings[0].createdAt).startOf("week"),Y=C?c(T).endOf("week"):c(_.bookings&&_.bookings[0].createdAt).endOf("week"),I=C?Object(N.a)(_.result):Object(N.a)(_.bookings),R=C?Object(N.b)(_.result):Object(N.b)(_.bookings),H=I.length>0&&I[I.length-1].totalHours,L=Object(N.e)(I),z=Object(N.e)(R),U=C?s.a.get(M,"etheraCredit",0):s.a.get(_&&_.provider,"etheraCredit",0),F=C?s.a.get(M,"promoCredit",0):s.a.get(_&&_.provider,"promoCredit",0),G=s.a.isNull(L)||s.a.isNull(F)||s.a.isNull(U)?"":Object(N.c)(_,L,F,U),W=s.a.isNull(L)||s.a.isNull(G)?"":Object(N.d)(L,G),J=z||0,K=Number(_.status)===v.c.BILLING_STATUS.PAID?_.providerOpenCredit:U;return r.a.createElement(r.a.Fragment,null,B&&r.a.createElement(h.a,null),_&&r.a.createElement(i.a,{className:"booking-invoice-detail"},r.a.createElement(u.a,{className:"mt-3"},r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"d-flex"},r.a.createElement(i.a,{md:1,xs:12,className:"d-flex flex-column align-items-center"},r.a.createElement(y.b,{to:"/provider/billings/booking-invoice"},r.a.createElement(b.a,{color:"info"},r.a.createElement("i",{className:"fa fa-arrow-left"})," Back"))),r.a.createElement(i.a,{md:5,xs:12,className:"d-flex flex-column align-items-center"},r.a.createElement("h2",null,r.a.createElement("b",{className:"text-primary"},"EtheraPay")),r.a.createElement("small",null,"Invoice:"," ","".concat(C?"Preview":"#".concat(_.invoiceNumber)))),r.a.createElement(i.a,{md:6,xs:12,className:"d-flex flex-column align-items-center mt-3 mt-md-0"},r.a.createElement("h2",null,r.a.createElement("b",{className:"text-info"},P)),r.a.createElement("small",null,Object(g.g)($,"MM/DD/YYYY")," -"," ",Object(g.g)(Y,"MM/DD/YYYY"))))),r.a.createElement(p.a,{className:"align-items-center table-sort",id:"ethera-table",responsive:!0},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null," ","Week of ".concat(Object(g.g)($,"MM/DD")," - ").concat(Object(g.g)(Y,"MM/DD")," ")," "),r.a.createElement("th",null," Booking Number "),r.a.createElement("th",null," Purchase Date"),r.a.createElement("th",null," Reservation Date "),r.a.createElement("th",null," Cancellation Date "),r.a.createElement("th",null," Room "),r.a.createElement("th",null," Rate "),r.a.createElement("th",null," Hours Booked "),r.a.createElement("th",null," Running Total "),r.a.createElement("th",null," Total "))),r.a.createElement("tbody",{className:"client"},I.map(function(e,t){return r.a.createElement(x,{key:t,bookingData:e})}),I.length>0&&r.a.createElement(k,{totalHours:H,totalChargedBookings:L,creditApplied:G,totalCharged:W}),r.a.createElement(j,{cancellations:R,totalCancellationBookings:z}))),r.a.createElement(E.a,{className:"d-flex justify-content-center"},r.a.createElement("h2",null,r.a.createElement("b",{className:"text-primary"},"Total Amount Due: $",Object(g.b)(W)," ")))),r.a.createElement(d.a,null,r.a.createElement(i.a,{md:6},r.a.createElement(w,{openingCreditBalance:K,creditApplied:G,creditReceived:J})),!C&&r.a.createElement(i.a,{md:6}," ",r.a.createElement(b.a,{color:"success",size:"sm",onClick:function(){return function(e){Object(O.a)(_,e,"ethera-table","credit-balance-table")}(W)}},"Export PDF")))))}}}]);
//# sourceMappingURL=27.1dc87cf1.chunk.js.map