(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1014:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(7),s=a(5),o=a(53),l=a(30),m=a(31),i=a(33),d=a(32),u=a(34),h=a(0),p=a.n(h),E=a(44),f=a.n(E),v=a(23),b=a.n(v),N=a(45),j=a(569),O=a.n(j),g=a(8),y=a(536),k=a(554),S=a(568),x=a(538),C=a(539),F=a(560),P=a(583),w=a(266),M=a(125),R=a(104),T=a(18),D=a(590),I=a.n(D),A=a(85);function B(e){var t=e.token,a=e.handleSelectedProvider,r=e.provider;return p.a.createElement(I.a,{className:"form-control",defaultValue:r,onSelect:a,options:{placeholder:"Select provider",ajax:{url:"".concat(A.a.API_END_POINT,"/providers"),headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},processResults:function(e){return{results:e.result.map(function(e){return{id:e.id,text:Object(T.x)(e)}})}},data:function(e){return{search:e.term}}}}})}var V=a(50),Y=(a(853),b()().startOf("date")),q="Amount must large than 0.",_="This Field is required.",J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).handleSelectedProvider=function(e){delete a.state.errors.provider,delete a.state.formError.provider,a.setState({provider:e.target.value})},a.handleSelectedDate=function(e,t){a.setState(Object(o.a)({},e,t))},a.handleChange=function(e){var t=e.target,r=t.value,n=t.name,c=a.state.formError;delete a.state.errors[n],delete a.state.formError[n],"amount"===n&&Number(r)<=0&&a.setState({formError:Object(s.a)({},c,{amount:[q]})}),a.setState(Object(o.a)({},n,r))},a.checkErrors=function(e){var t=a.state,r=t.errors,n=t.formError,c={},o={};for(var l in e)""===e[l]&&(c[l]=[_]),e.amount<=0&&(c.amount=[q]),e.provider||(o.provider=[_]),a.setState({errors:Object(s.a)({},r,o),formError:Object(s.a)({},n,c)})},a.createInvoice=Object(c.a)(n.a.mark(function e(){var t,r,c,s,o,l,m,i,d;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,r=t.provider,c=t.date,s=t.comment,o=t.amount,l=t.errors,m=t.formError,i=t.isFormReady,d={provider:r,date:c?Object(T.f)(c._d):"",comment:s.trim(),amount:o},e.next=4,a.checkErrors(d);case 4:f.a.isEmpty(m)&&f.a.isEmpty(l)&&i.check&&V.a.createManualInvoice(d).then(function(){g.b.success("Create Invoice success"),a.props.history.push("/admin/billings/manual-invoice")}).catch(function(e){a.setState({errors:e.response.data.errors}),g.b.error("Create Invoice fail")});case 5:case"end":return e.stop()}},e)})),a.handleError=function(e,t){if(t){var r,n=!0;for(var c in a.state.isFormReady)c!==e&&"check"!==c&&(n=n&&a.state.isFormReady[c]);a.setState({isFormReady:Object(s.a)({},a.state.isFormReady,(r={},Object(o.a)(r,e,!0),Object(o.a)(r,"check",n),r))})}else{var l;a.setState({isFormReady:Object(s.a)({},a.state.isFormReady,(l={},Object(o.a)(l,e,!1),Object(o.a)(l,"check",!1),l))})}},a.goBack=function(){a.props.history.goBack()},a.state={provider:"",date:Y,comment:"",amount:"",errors:{},formError:{},isFormReady:{}},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.token,a=this.state.formError;return p.a.createElement(y.a,{className:"create-invoice"},p.a.createElement(k.a,null,p.a.createElement(S.a,null,p.a.createElement(x.a,{className:"d-flex"},p.a.createElement(C.a,{md:6,xs:12,className:"d-flex justify-content-center align-items-center"},p.a.createElement("h2",null,p.a.createElement("b",{className:"text-primary"},"EtheraPay"))),p.a.createElement(C.a,{md:6,xs:12,className:"mt-3 mt-md-0"},p.a.createElement(x.a,{className:"d-flex align-items-center justify-content-center"},p.a.createElement("b",{className:"text-primary mr-3"},"Provider:"),p.a.createElement("div",{className:"width-200"},p.a.createElement(B,{token:t,handleSelectedProvider:this.handleSelectedProvider,provider:this.state.provider})))))),p.a.createElement(F.a,null,p.a.createElement(x.a,{className:"tb-custom"},p.a.createElement(C.a,{md:4,lg:3},p.a.createElement(x.a,{className:"header"},p.a.createElement("b",null,"Date")),p.a.createElement(x.a,{className:"body"},p.a.createElement(O.a,{className:"rdt",id:"date",defaultValue:this.state.date,inputProps:{placeholder:"MM/DD/YYYY"},closeOnSelect:!0,dateFormat:!0,timeFormat:!1,onChange:function(t){return e.handleSelectedDate("date",t)}}))),p.a.createElement(C.a,{md:6,lg:7},p.a.createElement(x.a,{className:"header"},p.a.createElement("b",null,"Comment")),p.a.createElement(x.a,{className:"body"},p.a.createElement(R.a,{type:"text",name:"comment",handleError:this.handleError,errors:a.comment,onChange:this.handleChange,required:!0,defaultValue:this.state.comment||"",placeholder:"Type comment..."}))),p.a.createElement(C.a,{md:2,lg:2},p.a.createElement(x.a,{className:"header"},p.a.createElement("b",null,"Amount")),p.a.createElement(x.a,{className:"body"},p.a.createElement(R.a,{type:"number",step:"0.01",name:"amount",handleError:this.handleError,errors:a.amount,onChange:this.handleChange,required:!0,defaultValue:this.state.amount||"",placeholder:"Type amount..."}))))),p.a.createElement(M.a,{error:this.state.errors,className:"mt-3 ml-3"}),p.a.createElement(P.a,null,p.a.createElement(C.a,{sm:12,className:"text-center"},p.a.createElement("span",{className:"font-weight-bold"},"Total Amount Due: $",Object(T.b)(this.state.amount))),p.a.createElement(x.a,{className:"mt-3"},p.a.createElement(C.a,{className:"text-center"},p.a.createElement(w.a,{color:"secondary",onClick:this.goBack},"Cancel")),p.a.createElement(C.a,{className:"text-center"},p.a.createElement(w.a,{color:"info",onClick:this.createInvoice},"Save"))))))}}]),t}(h.Component);t.default=Object(N.b)(function(e){return{token:e.auth.token}},null)(J)},568:function(e,t,a){"use strict";var r=a(12),n=a(15),c=a(0),s=a.n(c),o=a(4),l=a.n(o),m=a(14),i=a.n(m),d=a(6),u={tag:d.p,className:l.a.string,cssModule:l.a.object},h=function(e){var t=e.className,a=e.cssModule,c=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),l=Object(d.l)(i()(t,"card-header"),a);return s.a.createElement(c,Object(r.a)({},o,{className:l}))};h.propTypes=u,h.defaultProps={tag:"div"},t.a=h},583:function(e,t,a){"use strict";var r=a(12),n=a(15),c=a(0),s=a.n(c),o=a(4),l=a.n(o),m=a(14),i=a.n(m),d=a(6),u={tag:d.p,className:l.a.string,cssModule:l.a.object},h=function(e){var t=e.className,a=e.cssModule,c=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),l=Object(d.l)(i()(t,"card-footer"),a);return s.a.createElement(c,Object(r.a)({},o,{className:l}))};h.propTypes=u,h.defaultProps={tag:"div"},t.a=h},853:function(e,t,a){}}]);
//# sourceMappingURL=45.ae79c287.chunk.js.map