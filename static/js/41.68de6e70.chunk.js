(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{568:function(e,t,a){"use strict";var n=a(12),c=a(15),i=a(0),o=a.n(i),r=a(4),l=a.n(r),s=a(14),m=a.n(s),u=a(6),p={tag:u.p,className:l.a.string,cssModule:l.a.object},d=function(e){var t=e.className,a=e.cssModule,i=e.tag,r=Object(c.a)(e,["className","cssModule","tag"]),l=Object(u.l)(m()(t,"card-header"),a);return o.a.createElement(i,Object(n.a)({},r,{className:l}))};d.propTypes=p,d.defaultProps={tag:"div"},t.a=d},960:function(e,t,a){},961:function(e,t,a){},996:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(76),i=a(0),o=a.n(i),r=a(44),l=a.n(r),s=a(45),m=a(536),u=a(554),p=a(568),d=a(538),f=a(539),E=a(266),N=a(560),g=a(141),h=a(48),b=a(22),k=(a(960),a(18)),O=function(e){var t=e.type,a=e.notification,n=e.updateNotification;switch(Number(a.notificationType)){case b.c.NOTIFICATION_TYPES.ADMIN_ADD_NEW_POST:case b.c.NOTIFICATION_TYPES.MESSAGE_FROM_ADMIN:return o.a.createElement(v,{type:t,notification:a,updateNotification:n});case b.c.NOTIFICATION_TYPES.UPCOMING_BOOKING_REMINDER:case b.c.NOTIFICATION_TYPES.UPCOMING_BOOKING_REMINDER_OLD:return o.a.createElement(C,{type:t,notification:a,updateNotification:n});case b.c.NOTIFICATION_TYPES.CLIENT_MESSAGES:return o.a.createElement(I,{type:t,notification:a,updateNotification:n});case b.c.NOTIFICATION_TYPES.ADMIN_EDIT_BOOKING:return o.a.createElement(y,{type:t,notification:a,updateNotification:n});case b.c.NOTIFICATION_TYPES.CHANGE_MAKE_BY_ADMIN:return o.a.createElement(T,{type:t,notification:a,updateNotification:n});case b.c.NOTIFICATION_TYPES.CLIENT_CHECK_IN:return o.a.createElement(_,{type:t,notification:a,updateNotification:n});case b.c.NOTIFICATION_TYPES.BOOKING_CREATED:return o.a.createElement(M,{type:t,notification:a,updateNotification:n});default:return o.a.createElement(S,{type:t,notification:a})}},v=function(e){var t=e.type,a=e.notification,n=e.updateNotification,c=JSON.parse(a.content),i=l.a.get(c,"content",""),r=i&&Object(k.C)(i);return o.a.createElement(h.b,{to:"/provider/community",onClick:function(){return n(a.id,!0)}},o.a.createElement("h4",{className:a.read?"inactive-message":"active-message"},o.a.createElement("span",null,t)," - ",r))},C=function(e){var t=e.type,a=e.notification,n=e.updateNotification,c=JSON.parse(a.content),i=c.start_date,r=c.start_time,s=c.end_time,m=c.space,u=void 0===m?{}:m,p=l.a.get(u,"name","Non-Ethera"),d=l.a.get(u,"venue.name","");return o.a.createElement(h.b,{to:"/provider/bookings",onClick:function(){return n(a.id,!0)}},o.a.createElement("h4",{className:a.read?"inactive-message":"active-message"},o.a.createElement("span",null,t)," - Upcoming Booking on",o.a.createElement("span",null," ",Object(k.g)(i))," from",o.a.createElement("span",null," ",Object(k.u)("".concat(i," ").concat(r)))," to",o.a.createElement("span",null," ",Object(k.u)("".concat(i," ").concat(s)))," at",o.a.createElement("span",null," ",p)," ",u?"in":"",u&&o.a.createElement("span",null," ",d)))},I=function(e){var t=e.type,a=e.notification,n=e.updateNotification,c=JSON.parse(a.content),i=c&&Object(k.o)(c.client);return o.a.createElement(h.b,{to:{pathname:"/provider/clients/".concat(c.client.id),state:{goToMessagesPage:!0}},onClick:function(){return n(a.id,!0)}},o.a.createElement("h4",{className:a.read?"inactive-message":"active-message"},o.a.createElement("span",null,t)," - Message received from ",o.a.createElement("span",null,i)))},y=function(e){var t=e.type,a=e.notification,n=e.updateNotification;return o.a.createElement(h.b,{to:"/provider/bookings",onClick:function(){return n(a.id,!0)}},o.a.createElement("h4",{className:a.read?"inactive-message":"active-message"},o.a.createElement("span",null,t)))},A=function(e){if(e&&e.name){var t=e.venue;return"".concat(e.name," | ").concat(t.name)}return"Alternate space"},T=function(e){var t=e.type,a=e.notification,n=e.updateNotification,c=JSON.parse(a.content),i=c.start_date,r=c.start_time;return o.a.createElement("h4",{className:"cursor-pointer ".concat(a.read?"inactive-message":"active-message"),onClick:function(){return n(a.id,!0)}},o.a.createElement("span",null,t," "),"- There has been a change to one of your bookings (on ",o.a.createElement("span",null,Object(k.g)(i))," from ",o.a.createElement("span",null,Object(k.u)("".concat(i," ").concat(r)))," at ",o.a.createElement("span",null,A(c.space)),"), please contact the Admin for more information.")},_=function(e){var t=e.type,a=e.notification,n=e.updateNotification,c=JSON.parse(a.content),i=c.start_time,r=c&&Object(k.x)(c.client);return o.a.createElement("h4",{className:"cursor-pointer ".concat(a.read?"inactive-message":"active-message"),onClick:function(){return n(a.id,!0)}},o.a.createElement("span",null,t," "),"- ",o.a.createElement("span",null,r)," has checked in for their appointment at ",o.a.createElement("span",null,i))},S=function(e){var t=e.type,a=e.notification;return o.a.createElement("h4",{className:a.read?"inactive-message":"active-message"},o.a.createElement("span",null,t))},M=function(e){var t=e.type,a=e.notification,n=e.updateNotification,c=JSON.parse(a.content),i=c.start_time,r=c.start_date,l=A(c.space);return o.a.createElement("h4",{className:"cursor-pointer ".concat(a.read?"inactive-message":"active-message"),onClick:function(){return n(a.id,!0)}},o.a.createElement("span",null,t," "),"- on ",o.a.createElement("span",null,Object(k.h)("".concat(r," ").concat(i)))," at ",o.a.createElement("span",null,l))},j=function(e){var t=e.notification,a=e.updateNotification,n=Object(k.h)(t.createdAt),c=!l.a.isNull(t)&&b.c.NOTIFICATION_TYPES_INFO.find(function(e){return e.id===Number(t.notificationType)}),i=c?c.contentType:"Unknown";return o.a.createElement("div",{className:"ml-3 my-3 notification"},o.a.createElement(d.a,null,o.a.createElement("div",null,t.read?o.a.createElement("i",{className:"far fa-bell",title:"Bookmark unread",onClick:function(){return a(t.id,!1)}}):o.a.createElement("i",{className:"fas fa-bell cursor-pointer",onClick:function(){return a(t.id,!0)}})),o.a.createElement(f.a,null," ",o.a.createElement(O,{type:i,notification:t,updateNotification:a}))),o.a.createElement("div",{className:"text-right notification__timestamp"},o.a.createElement("span",null,n)))},x=(a(961),a(564)),F=a(563),B=a(555);function P(e){var t=e.isOpen,a=e.toggle,n=e.handle,c=e.notificationSetting,i=e.handleMultipleSelectNotificationTypes;return o.a.createElement(x.a,{className:"modal-dialog-centered",isOpen:t,toggle:a},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h6",{className:"modal-title",id:"modal-title-default"},"Notification Settings"),o.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:a},o.a.createElement("span",{"aria-hidden":!0},"\xd7"))),o.a.createElement("div",{className:"modal-body text-center"},o.a.createElement(F.a,{className:"form-control-label mb-3"},"Select the type of notifications displayed"),o.a.createElement("div",{className:"mx-3"},o.a.createElement("div",{className:"custom-control custom-checkbox text-left mb-3"},o.a.createElement(B.a,{className:"custom-control-input",type:"checkbox",name:"clientMessages",id:"clientMessages",checked:c.clientMessages,onChange:function(e){return i(e,c)}}),o.a.createElement(F.a,{className:"custom-control-label",htmlFor:"clientMessages"},"Messages from client")),o.a.createElement("div",{className:"custom-control custom-checkbox text-left mb-3"},o.a.createElement(B.a,{className:"custom-control-input",type:"checkbox",name:"upcomingBookingReminder",id:"upcomingBookingReminder",checked:c.upcomingBookingReminder,onChange:function(e){return i(e,c)}}),o.a.createElement(F.a,{className:"custom-control-label",htmlFor:"upcomingBookingReminder"},"Upcoming booking reminder")),o.a.createElement("div",{className:"custom-control custom-checkbox text-left mb-3"},o.a.createElement(B.a,{className:"custom-control-input",type:"checkbox",name:"upcomingClientAppointment",id:"upcomingClientAppointment",checked:c.upcomingClientAppointment,onChange:function(e){return i(e,c)}}),o.a.createElement(F.a,{className:"custom-control-label",htmlFor:"upcomingClientAppointment"},"Upcoming client appointment")),o.a.createElement("div",{className:"custom-control custom-checkbox text-left mb-3"},o.a.createElement(B.a,{className:"custom-control-input",type:"checkbox",name:"changeMakeByAdmin",id:"changeMakeByAdmin",checked:c.changeMakeByAdmin,onChange:function(e){return i(e,c)}}),o.a.createElement(F.a,{className:"custom-control-label",htmlFor:"changeMakeByAdmin"},"Changes made by admin")),o.a.createElement("div",{className:"custom-control custom-checkbox text-left mb-3"},o.a.createElement(B.a,{className:"custom-control-input",type:"checkbox",name:"messageFromAdmin",id:"messageFromAdmin",checked:c.messageFromAdmin,onChange:function(e){return i(e,c)}}),o.a.createElement(F.a,{className:"custom-control-label",htmlFor:"messageFromAdmin"},"Admin adds new post")),o.a.createElement("div",{className:"custom-control custom-checkbox text-left mb-3"},o.a.createElement(B.a,{className:"custom-control-input",type:"checkbox",name:"clientCheckIn",id:"clientCheckIn",checked:c.clientCheckIn,onChange:function(e){return i(e,c)}}),o.a.createElement(F.a,{className:"custom-control-label",htmlFor:"clientCheckIn"},"Client check in")))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement(E.a,{color:"danger",outline:!0,"data-dismiss":"modal",type:"button",onClick:a},"Cancel"),o.a.createElement(E.a,{className:"ml-auto",color:"success",type:"button",onClick:n},"Save")))}var w=a(2),R=a.n(w),D=a(7),Y=a(10),G="/provider-notification-settings",J={getNotificationSetting:function(){var e=Object(D.a)(R.a.mark(function e(){var t,a;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(G,"/me"),e.next=3,Y.a.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),updateNotificationSetting:function(){var e=Object(D.a)(R.a.mark(function e(t){var a,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(G,"/me"),e.next=3,Y.a.patch(a,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},U=a(124),K=a(8);t.default=function(e){var t=Object(s.c)(),a=Object(s.d)(function(e){return e.notification.data}),r=Object(s.d)(function(e){return e.notification.loading}),h=Object(i.useState)(!1),b=Object(c.a)(h,2),k=b[0],O=b[1],v=function(){O(!k)},C=Object(i.useState)({}),I=Object(c.a)(C,2),y=I[0],A=I[1];Object(i.useEffect)(function(){t(Object(g.b)()),J.getNotificationSetting().then(function(e){A(e)}).catch(function(e){K.b.error("get fail")})},[]);var T=function(e,a){var n={read:a};t(Object(g.d)(e,n))},_=a.result;return o.a.createElement(m.a,{className:"list-notification"},r&&o.a.createElement(U.a,null),o.a.createElement(P,{isOpen:k,toggle:v,handle:function(){var e={bookingCreated:y.bookingCreated,clientMessages:y.clientMessages,upcomingBookingReminder:y.upcomingBookingReminder,upcomingClientAppointment:y.upcomingClientAppointment,changeMakeByAdmin:y.changeMakeByAdmin,messageFromAdmin:y.messageFromAdmin,clientCheckIn:y.clientCheckIn,clientAppointmentStart:y.clientAppointmentStart};J.updateNotificationSetting(e).then(function(e){A(e),K.b.success("Update notification setting success"),v()}).catch(function(e){console.log(e),K.b.error("Update notification setting fail")})},notificationSetting:y,handleMultipleSelectNotificationTypes:function(e,t){var a=e.target,c=a.checked;t[a.name]=c,A(Object(n.a)({},t))}}),o.a.createElement(u.a,{className:"my-3"},o.a.createElement(p.a,{className:"ml-3"},o.a.createElement(d.a,null,o.a.createElement(f.a,null,o.a.createElement("h1",null,o.a.createElement("b",null,"Notifications"))),o.a.createElement(f.a,{className:"text-center"},o.a.createElement(E.a,{color:"link",onClick:function(){return function(e){var a=e.filter(function(e){return!e.read});!l.a.isNull(a)&&a.forEach(function(e){t(Object(g.c)(e.id,{read:!0}))})}(_)}},o.a.createElement("i",{className:"fas fa-check-double fa-sm"})," Mark all as read"," ")),o.a.createElement(f.a,{className:"text-right"},o.a.createElement(E.a,{color:"link",onClick:v},o.a.createElement("i",{className:"fas fa-cog fa-lg"}))))),o.a.createElement(N.a,null,_&&_.map(function(e){return o.a.createElement(j,{key:e.id,notification:e,updateNotification:T})}))))}}}]);
//# sourceMappingURL=41.68de6e70.chunk.js.map