(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{568:function(e,t,a){"use strict";var l=a(12),n=a(15),r=a(0),c=a.n(r),o=a(4),s=a.n(o),u=a(14),i=a.n(u),m=a(6),d={tag:m.p,className:s.a.string,cssModule:s.a.object},b=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),s=Object(m.l)(i()(t,"card-header"),a);return c.a.createElement(r,Object(l.a)({},o,{className:s}))};b.propTypes=d,b.defaultProps={tag:"div"},t.a=b},583:function(e,t,a){"use strict";var l=a(12),n=a(15),r=a(0),c=a.n(r),o=a(4),s=a.n(o),u=a(14),i=a.n(u),m=a(6),d={tag:m.p,className:s.a.string,cssModule:s.a.object},b=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),s=Object(m.l)(i()(t,"card-footer"),a);return c.a.createElement(r,Object(l.a)({},o,{className:s}))};b.propTypes=d,b.defaultProps={tag:"div"},t.a=b},597:function(e,t,a){"use strict";var l=a(12),n=a(15),r=a(0),c=a.n(r),o=a(4),s=a.n(o),u=a(14),i=a.n(u),m=a(6),d={className:s.a.string,cssModule:s.a.object,size:s.a.string,bordered:s.a.bool,borderless:s.a.bool,striped:s.a.bool,dark:s.a.bool,hover:s.a.bool,responsive:s.a.oneOfType([s.a.bool,s.a.string]),tag:m.p,responsiveTag:m.p,innerRef:s.a.oneOfType([s.a.func,s.a.string,s.a.object])},b=function(e){var t=e.className,a=e.cssModule,r=e.size,o=e.bordered,s=e.borderless,u=e.striped,d=e.dark,b=e.hover,p=e.responsive,E=e.tag,f=e.responsiveTag,g=e.innerRef,h=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),N=Object(m.l)(i()(t,"table",!!r&&"table-"+r,!!o&&"table-bordered",!!s&&"table-borderless",!!u&&"table-striped",!!d&&"table-dark",!!b&&"table-hover"),a),O=c.a.createElement(E,Object(l.a)({},h,{ref:g,className:N}));if(p){var v=Object(m.l)(!0===p?"table-responsive":"table-responsive-"+p,a);return c.a.createElement(f,{className:v},O)}return O};b.propTypes=d,b.defaultProps={tag:"table",responsiveTag:"div"},t.a=b},633:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return u});var l=a(5),n=a(658),r=a.n(n),c=(a(632),a(23)),o=a(18),s=function(e,t){var a=new r.a("l","pt"),n={fillColor:[41,128,186],textColor:[255,255,255],fontStyle:"bold"},o=a.internal.pageSize,s=o.width?o.width:o.getWidth();a.text("Billing Invoice",s/2,30,"center"),a.autoTable({html:"#".concat(e),startY:55,didParseCell:function(e){0===e.row.index&&(e.cell.styles=Object(l.a)({},e.cell.styles,n))}}),a.autoTable({html:"#".concat(t),didParseCell:function(e){1===e.row.index&&(e.cell.styles=Object(l.a)({},e.cell.styles,n))}}),a.save("invoice_".concat(String(c().valueOf()),".pdf"))},u=function(e,t,a,n){var s=Object(o.x)(e.provider),u=c(e.bookings&&e.bookings[0].createdAt).startOf("week"),i=c(e.bookings&&e.bookings[0].createdAt).endOf("week"),m=new r.a("l","pt"),d={fillColor:[227,136,91],textColor:[255,255,255],fontStyle:"bold"},b={textColor:[245,54,92]},p=m.internal.pageSize,E=p.width?p.width:p.getWidth(),f="Invoice ".concat(e.invoiceNumber),g=s,h="".concat(Object(o.g)(u)," - ").concat(Object(o.g)(i)),N="TOTAL AMOUNT DUE: "+String(t)+"$";m.text("EtheraPay",E/2,30,"center"),m.text(f,E/2,55,"center"),m.text(g,E/2,80,"center"),m.text(h,E/2,105,"center"),m.autoTable({html:"#".concat(a),startY:120,didParseCell:function(e){var t=e.table.body;e.row.index===t.length-1&&(e.cell.styles=Object(l.a)({},e.cell.styles,d)),"body"===e.section&&e.row.raw.className&&e.row.raw.className.includes("custom-row__cancellation")&&(e.cell.styles=Object(l.a)({},e.cell.styles,b))}}),m.text(N,E/2,m.autoTable.previous.finalY+30,"center"),m.autoTable({html:"#".concat(n),startY:m.autoTable.previous.finalY+50,pageBreak:"always",didParseCell:function(e){var t=e.table.body;e.row.index===t.length-1&&(e.cell.styles=Object(l.a)({},e.cell.styles,d))}}),m.save("Ethera-Pay_".concat(String(c().valueOf()),".pdf"))}},657:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return c}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return s}),a.d(t,"d",function(){return u});var l=a(5),n=(a(632),a(22)),r=function(e){var t=[];return e&&e.forEach(function(e,a){e.prices&&e.prices.forEach(function(a){var n=0===t.length?0:t[t.length-1].totalHours,r=Object(l.a)({},a,e,{totalHours:Number(a.hours)+Number(n)});t.push(r)})}),t},c=function(e){var t=[];return e&&e.forEach(function(e){e.status===n.c.BOOKING_STATUS.CANCELED&&e.prices.forEach(function(a){var n=Object(l.a)({},a,e);t.push(n)})}),t},o=function(e,t,a,l){var r=Number(a)+Number(l);if(Number(e.status)===n.c.BILLING_STATUS.PAID)return{promoApplied:e.appliedPromoCredit,etheraApplied:e.appliedEtheraCredit};if(Number(t)<Number(a)){return{promoApplied:t,etheraApplied:0}}return Number(t)<Number(r)?{promoApplied:a,etheraApplied:Number(t)-Number(a)}:{promoApplied:a,etheraApplied:l}},s=function(e){return e.length>0&&e.map(function(e){return Number(e.price)*Number(e.hours)}).reduce(function(e,t){return e+t})},u=function(e,t){return Number(e)>Number(t.promoApplied)+Number(t.etheraApplied)?Number(e)-(Number(t.promoApplied)+Number(t.etheraApplied)):0}},852:function(e,t,a){},994:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(45),c=a(23),o=a.n(c),s=a(44),u=a.n(s),i=a(124),m=a(539),d=a(554),b=a(568),p=a(538),E=a(597),f=a(583),g=a(266),h=a(192),N=a(18),O=a(657),v=a(633),j=a(22),C=function(e){var t=e.cancellations,a=e.totalCancellationBookings;return n.a.createElement(n.a.Fragment,null,t.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"12"})),n.a.createElement("tr",null,n.a.createElement("td",{className:"text-left",colSpan:"11"},n.a.createElement("h3",{className:"text-danger"},n.a.createElement("b",null,"Cancellations")))),t.map(function(e,t){var a=e.bookingNumber,l=e.hours,r=e.cancelDate,c=e.price,o=e.space,s=a||"#########",u=Object(N.g)(r),i=o.name,m=Number(c)*Number(l);return n.a.createElement("tr",{className:"custom-row__cancellation",key:t},n.a.createElement("td",null),n.a.createElement("td",{colSpan:"4"},"#",s),n.a.createElement("td",null," ",u),n.a.createElement("td",null,i),n.a.createElement("td",null,"$",Object(N.b)(c)),n.a.createElement("td",{colSpan:"2"},Object(N.b)(l)),n.a.createElement("td",null,"$",Object(N.b)(m)))}),n.a.createElement("tr",{className:"custom-row__result"},n.a.createElement("td",{className:"text-left text-primary",colSpan:"10"},"Total"),n.a.createElement("td",null,"$",Object(N.b)(a)))))},A=function(e){var t=e.totalHours,a=e.creditApplied,l=e.totalChargedBookings,r=e.totalCharged;return n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",{className:"custom-row__result"},n.a.createElement("td",{colSpan:"9"},"Total"),n.a.createElement("td",null,Object(N.b)(t)),n.a.createElement("td",null,"$",Object(N.b)(l))),n.a.createElement("tr",{className:"custom-row__result"},n.a.createElement("td",{colSpan:"10"},"Promo Credit"),n.a.createElement("td",null,"$",Object(N.b)(a.promoApplied))),n.a.createElement("tr",{className:"custom-row__result"},n.a.createElement("td",{colSpan:"10"},"Ethera Credit"),n.a.createElement("td",null,"$",Object(N.b)(a.etheraApplied))),n.a.createElement("tr",{className:"custom-row__result"},n.a.createElement("td",{colSpan:"10"},"Total Charged"),n.a.createElement("td",null,"$",Object(N.b)(r))))},k=a(560),T=function(e){var t=e.openingCreditBalance,a=e.creditApplied,l=e.creditReceived;return n.a.createElement(d.a,null,n.a.createElement(k.a,null,n.a.createElement(E.a,{className:"align-items-center",id:"credit-balance-table",responsive:!0},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",{className:"text-center",colSpan:"2"}," ",n.a.createElement("h2",{className:"text-success mt-2"},"Credit Balance")," "))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null," Opening Credit Balance"),n.a.createElement("td",null,"$",Object(N.b)(t))),n.a.createElement("tr",null,n.a.createElement("td",null," Credit Applied"),n.a.createElement("td",null,"$",Object(N.b)(a.etheraApplied))),n.a.createElement("tr",null,n.a.createElement("td",null," Credit Received"),n.a.createElement("td",null,"$",Object(N.b)(l))),n.a.createElement("tr",{className:"text-primary custom-row__result"},n.a.createElement("td",null,"Closing Credit Balance"),n.a.createElement("td",null,"$",Object(N.b)(Number(t)-Number(a.etheraApplied)+Number(l))))))))},w=function(e){var t=e.bookingData,a=t.tier,l=t.bookingNumber,r=t.createdAt,c=t.startDate,s=t.hours,u=t.totalHours,i=t.cancelDate,m=t.price,d=t.space,b=t.status,p=t.startTime,E=o()(p,"hh:mm:ssa").format("hh:mma"),f=l||"#########",g=Object(N.g)(r),h=Object(N.g)(c),O=Object(N.g)(i),v=d.name,C=b===j.c.BOOKING_STATUS.CANCELED;return n.a.createElement("tr",{className:"".concat(C?"custom-row__cancellation":"")},n.a.createElement("td",null,"Tier: ",a),n.a.createElement("td",null,"#",f),n.a.createElement("td",null,g),n.a.createElement("td",null,h),n.a.createElement("td",null,E),n.a.createElement("td",null,C?O:""),n.a.createElement("td",null,v),n.a.createElement("td",null,"$",Object(N.b)(m)),n.a.createElement("td",null,Object(N.b)(s)),n.a.createElement("td",null,Object(N.b)(u)),n.a.createElement("td",null,"$",Object(N.b)(Number(m)*Number(s))))};a(852);function x(e){var t=Object(r.c)(),a=e.match.params.id,o=Object(r.d)(function(e){return e.billing.detailData}),s=Object(r.d)(function(e){return e.billing.loading});Object(l.useEffect)(function(){t(Object(h.c)(a))},[]);var k=Object(N.x)(o.provider),x=c(o.bookings&&o.bookings[0].createdAt).startOf("week"),y=c(o.bookings&&o.bookings[0].createdAt).endOf("week"),S=Object(O.a)(o.bookings),D=Object(O.b)(o.bookings),_=S.length>0&&S.map(function(e){return Number(e.price)*Number(e.hours)}),M=D.length>0&&D.map(function(e){return Number(e.price)*Number(e.hours)}),B=S.length>0&&S[S.length-1].totalHours,P=_&&_.reduce(function(e,t){return e+t}),$=M&&M.reduce(function(e,t){return e+t}),Y=u.a.get(o&&o.provider,"etheraCredit",0),I=u.a.get(o&&o.provider,"promoCredit",0),R=u.a.isNull(P)||u.a.isNull(I)||u.a.isNull(Y)?"":Object(O.c)(o,P,I,Y),H=u.a.isNull(P)||u.a.isNull(R)?"":Object(O.d)(P,R),L=$||0,z=Number(o.status)===j.c.BILLING_STATUS.PAID?o.providerOpenCredit:Y;return n.a.createElement(n.a.Fragment,null,s&&n.a.createElement(i.a,null),o&&n.a.createElement(m.a,{className:"booking-invoice-detail"},n.a.createElement(d.a,{className:"mt-3"},n.a.createElement(b.a,null,n.a.createElement(p.a,{className:"d-flex"},n.a.createElement(m.a,{md:6,xs:12,className:"d-flex flex-column align-items-center"},n.a.createElement("h2",null,n.a.createElement("b",{className:"text-primary"},"EtheraPay")),n.a.createElement("small",null,"Invoice: #",o.invoiceNumber)),n.a.createElement(m.a,{md:6,xs:12,className:"d-flex flex-column align-items-center mt-3 mt-md-0"},n.a.createElement("h2",null,n.a.createElement("b",{className:"text-info"},k)),n.a.createElement("small",null,Object(N.g)(x,"DD/MM/YYYY")," -"," ",Object(N.g)(y,"DD/MM/YYYY"))))),n.a.createElement(E.a,{className:"align-items-center table-sort",id:"ethera-table",responsive:!0},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",null," ","Week of ".concat(Object(N.g)(x,"MM/DD")," - ").concat(Object(N.g)(y,"MM/DD")," ")," "),n.a.createElement("th",null," Booking Number "),n.a.createElement("th",null," Purchase Date"),n.a.createElement("th",null," Reservation Date "),n.a.createElement("th",null," Reservation Time "),n.a.createElement("th",null," Cancellation Date "),n.a.createElement("th",null," Room "),n.a.createElement("th",null," Rate "),n.a.createElement("th",null," Hours "),n.a.createElement("th",null," Total Hours "),n.a.createElement("th",null," Total "))),n.a.createElement("tbody",{className:"client"},S.map(function(e,t){return n.a.createElement(w,{key:t,bookingData:e})}),S.length>0&&n.a.createElement(A,{totalHours:B,totalChargedBookings:P,creditApplied:R,totalCharged:H}),n.a.createElement(C,{cancellations:D,totalCancellationBookings:$}))),n.a.createElement(f.a,{className:"d-flex justify-content-center"},n.a.createElement("h2",null,n.a.createElement("b",{className:"text-primary"},"Total Amount Due: $",Object(N.b)(H))))),n.a.createElement(p.a,null,n.a.createElement(m.a,{md:6},n.a.createElement(T,{openingCreditBalance:z,creditApplied:R,creditReceived:L})),n.a.createElement(m.a,{md:6}," ",n.a.createElement(g.a,{color:"success",size:"sm",onClick:function(){return function(e){Object(v.a)(o,e,"ethera-table","credit-balance-table")}(H)}},"Export PDF")))))}a.d(t,"default",function(){return x})}}]);
//# sourceMappingURL=26.1dc8d805.chunk.js.map