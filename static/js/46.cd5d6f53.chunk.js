(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1002:function(e,t,a){"use strict";a.r(t);var n=a(30),r=a(31),l=a(33),s=a(32),c=a(34),i=a(0),o=a.n(i),m=a(45),u=a(536),d=a(554),f=a(560),p=a(583),g=a(538),E=a(555),h=a(266),v=a(564),N=a(542),b=a(543),y=a(8),_=a(743),S=a.n(_),M=a(57),k=a(18),x=a(204),w=a(193),j=a(80),O=a(48),T=a(44),C=a.n(T),D=a(22),P=a(608),I=a(190),A=a.n(I),F=a(23),Y=a.n(F);var G=function(e){var t=e.files;return t.length>0&&t.map(function(e,t){var a=Object(P.a)(e.messageFile);return o.a.createElement("div",{key:t,className:"d-flex justify-content-start"},o.a.createElement("a",{className:"file-name",href:e.messageFile,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("li",null,a)))})},L=function(e){var t=e.message;switch(Number(t.messageType)){case D.c.MESSAGE_TYPE.DEFAULT_MESSAGE:return o.a.createElement(R,{content:t.content});case D.c.MESSAGE_TYPE.APPOINTMENT_MESSAGE:return o.a.createElement(U,{content:t.content});default:return o.a.createElement(R,{content:t.content})}},R=function(e){var t={__html:e.content};return o.a.createElement("div",{dangerouslySetInnerHTML:t})},U=function(e){var t=e.content,a=JSON.parse(t)[0].fields,n=a.start_time,r=a.end_time;return o.a.createElement(O.b,{to:"/client/appointments"},o.a.createElement("i",null,"Your provider has added a new appointment"),o.a.createElement("span",{className:"time_date mr-2 mt-2"},"from ",Y()("1-1-1 ".concat(n)).format("hh:mm A")," to"," ",Y()("1-1-1 ".concat(r)).format("hh:mm A")))},W=function(e){var t=e.timeCreate,a=e.providerData,n=e.files,r=e.message,l=e.providerName,s=C.a.isNull(a)||C.a.isNull(a.avatar)?A.a:a.avatar,c=r.messageType===D.c.MESSAGE_TYPE.APPOINTMENT_MESSAGE;return o.a.createElement(o.a.Fragment,null,c?o.a.createElement(g.a,{className:"user d-flex align-items-start justify-content-center"}):o.a.createElement(g.a,{className:"user d-flex align-items-start justify-content-start"},o.a.createElement("div",{className:"user__avatar mr-2"},o.a.createElement("img",{src:s,className:"avatar rounded-circle",alt:"avatar"}),o.a.createElement("span",{className:"user__avatar__name"},l)),o.a.createElement("div",{className:"text-left msg-box"},o.a.createElement("div",{className:"message-content"},o.a.createElement(L,{message:r}),o.a.createElement("div",{className:n.length>0?"file-list mt-3":"d-none"},o.a.createElement("b",null,"Attachments"),n.length>0?o.a.createElement(G,{files:n}):"")),o.a.createElement("span",{className:"time_date mr-2 mt-2"}," ",t," "))))};var V=function(e){var t=e.client,a=e.content,n=e.files,r=e.timeCreate,l=e.clientName,s=t&&t.firstName.charAt(0)+t.lastName.charAt(0),c={__html:a};return C.a.isNull(t)||C.a.isNull(t.avatar)?A.a:t.avatar,o.a.createElement(g.a,{className:"user d-flex align-items-start justify-content-end"},o.a.createElement("div",{className:"msg-box"},o.a.createElement("div",{className:"message-content text-left"},o.a.createElement("div",{dangerouslySetInnerHTML:c}),o.a.createElement("div",{className:n.length>0?"file-list mt-3":"d-none"},o.a.createElement("b",null,"Attachments"),n.length>0?o.a.createElement(B,{files:n}):"")),o.a.createElement("span",{className:"time_date text-right mr-2 mt-2"},r)),o.a.createElement("div",{className:"user__avatar ml-2"},o.a.createElement("div",{style:{display:"flex",width:"50px",height:"50px",background:"gray",borderRadius:"50%",justifyContent:"center",alignItems:"center"}},o.a.createElement("p",{style:{fontSize:"1.4rem",color:"white"}},s)),o.a.createElement("span",{className:"user__avatar__name"},l)))},B=function(e){var t=e.files;return t.length>0&&t.map(function(e,t){var a=Object(P.a)(e.messageFile);return o.a.createElement("div",{key:t,className:"d-flex justify-content-start"},o.a.createElement("a",{className:"file-name",href:e.messageFile,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("li",null,a)))})},H=(a(971),function(){return{content:"",files:[],attachments:[],isShowWelcomeClientModal:!0}}),J=function(){return{ordering:"created_at",desc:!1}},q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).el=o.a.createRef(),a.getProviderInfo=function(){var e=M.a.getUserInfo();j.a.detail(e.user_id).then(function(e){a.props.getDetail(e.userProvider)}).catch(function(e){console.error(e)})},a.scrollToBottom=function(){a.el.scrollIntoView(!1),a.el.scrollIntoView({block:"nearest"}),a.el.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},a.handleChange=function(e){a.setState({content:e})},a.handleUploadFile=function(e){var t=[];e.target.files.length&&(Object.keys(e.target.files).forEach(function(a){t.push(e.target.files[a])}),a.setState({files:[].concat(t)}))},a.handleSubmit=function(){var e=a.state,t=e.content,n=e.files;if(Object(k.D)(t)){var r={content:t,files:n};a.props.clientSendMessage(r),a.clearData()}},a.clearData=function(){a.setState(H())},a.closeWelcomeClientModal=function(){a.setState({isShowWelcomeClientModal:!1});var e={id:a.props.clientData.id,isFirstLogin:!1};j.a.update(e).then(function(e){a.setState({errors:{}}),window.location.reload()}).catch(function(e){var t=e.response.data;a.focusFirstError(t),a.setState({errors:t}),y.b.error("Update Fail")})},a.state=H(),a.filters=J(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getProviderInfo(),this.props.getProviderMessage(this.filters,this.scrollToBottom),this.getProviderMessage=setInterval(function(){return e.props.getProviderMessage(e.filters)},5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getProviderMessage)}},{key:"render",value:function(){var e=this,t=this.props,a=t.clientData,n=t.messageData,r=t.providerData,l=n.result,s=this.state,c=s.content,i=s.files,m=s.isShowWelcomeClientModal,v=i.length,N=Object(k.x)(a),b=Object(k.x)(r);return o.a.createElement(u.a,{fluid:!0,className:"main"},o.a.createElement(d.a,{className:"mt-3 mx-auto"},o.a.createElement(f.a,null,o.a.createElement("div",{ref:function(t){e.el=t}},l&&l.map(function(e){var t=e.content,n=Object(k.h)(e.createdAt,"MM/DD/YYYY - hh:mm:ss a"),l=e.fromType||0,s=e.files;return l===D.c.FROM_TYPE.CLIENT?o.a.createElement(V,{key:e.id,client:a,timeCreate:n,content:t,files:s,clientName:N}):l===D.c.FROM_TYPE.PROVIDER?o.a.createElement(W,{key:e.id,providerId:a.userProvider,providerData:r,timeCreate:n,files:s,message:e,providerName:b}):""}))),o.a.createElement(p.a,{className:"client-screen-messages"},o.a.createElement("p",{className:"disclaimer"},o.a.createElement("small",null,"This messaging platform is not intended for immediate support, crisis intervention, or as a replacement of therapeutic services. If you are experiencing an emergency or crisis and need immediate help, call 911 or go to the nearest emergency room")),o.a.createElement(S.a,{className:"mt-3",value:c,onChange:this.handleChange,name:"content",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","blockquote","code"]]},placeholder:"This message is sent directly to your provider's portal"}),o.a.createElement(g.a,{className:"my-3 md-ml-2 align-items-center d-flex justify-content-end mr-1"},o.a.createElement("div",null,o.a.createElement(E.a,{accept:"file/*",id:"text-button-file",className:"d-none",type:"file",multiple:!0,onChange:this.handleUploadFile}),o.a.createElement("div",{className:"mr-3 mt-3"},o.a.createElement("label",{className:"mr-2 text-muted"},v>0?"".concat(v,v>1?" files":" file"):""),o.a.createElement("label",{htmlFor:"text-button-file",className:"cursor-pointer"},o.a.createElement("i",{className:"fas fa-paperclip fa-lg"})))),o.a.createElement(h.a,{className:"text-right",color:"info",disabled:!c,outline:!0,onClick:this.handleSubmit},o.a.createElement("i",{className:"fas fa-paper-plane"})," Send")))),o.a.createElement(z,{isOpen:a.isFirstLogin&&m,toggle:this.closeWelcomeClientModal,fullname:N}))}}]),t}(i.Component),z=function(e){return o.a.createElement(v.a,Object.assign({},e,{size:"md",keyboard:!1,backdrop:"static"}),o.a.createElement(N.a,null,o.a.createElement("p",null,"Hi ",e.fullname,", Thank you for registering your account with Ethera! You can now use this secure client portal to track your appointments, download forms, make payments, and directly message your provider. If you have any questions about using the portal, please email ",o.a.createElement("a",{href:"mailto:support@myethera.com"},"support@myethera.com"),".")),o.a.createElement(b.a,null,o.a.createElement("div",{className:"w-100 text-center"},o.a.createElement(h.a,{color:"primary",onClick:e.toggle},"Continue"))))},K={getProviderMessage:x.c,clientSendMessage:x.a,getDetail:w.g},Q=Object(m.b)(function(e){return{clientData:e.navBars.data,messageData:e.message.data,loading:e.message.loading,providerData:e.provider.data}},K)(q);t.default=Q},608:function(e,t,a){"use strict";function n(e){try{return e.replace(/^.*[\\\/]/,"").split("?")[0]}catch(t){return"File error"}}a.d(t,"a",function(){return n})},971:function(e,t,a){}}]);
//# sourceMappingURL=46.cd5d6f53.chunk.js.map