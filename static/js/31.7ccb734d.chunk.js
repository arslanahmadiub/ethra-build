(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1000:function(e,t,a){"use strict";a.r(t);var r=a(53),n=a(5),s=a(37),c=a(30),l=a(31),o=a(33),i=a(32),u=a(34),m=a(0),d=a.n(m),p=a(45),f=a(48),h=a(14),b=a.n(h),g=a(569),v=a.n(g),E=a(44),k=a.n(E),N=a(8),y=a(536),O=a(554),j=a(560),D=a(561),_=a(538),w=a(539),C=a(562),S=a(563),T=a(266),F=a(597),x=a(12),H=a(15),I=a(4),M=a.n(I),R=a(6),L={tag:R.p,flush:M.a.bool,className:M.a.string,cssModule:M.a.object},V=function(e){var t=e.className,a=e.cssModule,r=e.tag,n=e.flush,s=Object(H.a)(e,["className","cssModule","tag","flush"]),c=Object(R.l)(b()(t,"list-group",!!n&&"list-group-flush"),a);return d.a.createElement(r,Object(x.a)({},s,{className:c}))};V.propTypes=L,V.defaultProps={tag:"ul"};var B=V,P={tag:R.p,active:M.a.bool,disabled:M.a.bool,color:M.a.string,action:M.a.bool,className:M.a.any,cssModule:M.a.object},U=function(e){e.preventDefault()},z=function(e){var t=e.className,a=e.cssModule,r=e.tag,n=e.active,s=e.disabled,c=e.action,l=e.color,o=Object(H.a)(e,["className","cssModule","tag","active","disabled","action","color"]),i=Object(R.l)(b()(t,!!n&&"active",!!s&&"disabled",!!c&&"list-group-item-action",!!l&&"list-group-item-"+l,"list-group-item"),a);return s&&(o.onClick=U),d.a.createElement(r,Object(x.a)({},o,{className:i}))};z.propTypes=P,z.defaultProps={tag:"li"};var J=z,Y=a(18),q=a(104),A=a(46),$=a(635),W=a(2),G=a.n(W),K=a(7),Q=a(10),X={delete:function(){var e=Object(K.a)(G.a.mark(function e(t){var a,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/space-images","/").concat(t),e.next=3,Q.a.delete(a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Z=a(99),ee=a(753),te=a(748),ae=(a(659),["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]),re=ae.map(function(e,t){return{dayOfWeek:t+1,name:e,startTime:"8:00",closeTime:"20:00",isUsable:!1}}),ne=["tier 1","tier 2","tier 3","tier 3"].map(function(e,t){return{tier:t+1,hour:null}}),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).deleteSpace=function(){var e=a.state.spaceId;$.a.delete(e).then(function(){N.b.success("Delete space successfully"),a.props.history.push("/admin/venues")}).catch(function(){N.b.error("Delete space failed")})},a.toggleConfirmDelete=function(){a.setState({isDeleteVenue:!a.state.isDeleteVenue})},a.addBlackoutDates=function(e){a.setState({blackoutDates:[{date:null,disabled:!1}].concat(Object(s.a)(a.state.blackoutDates))})},a.setBlackoutDates=function(e,t){var r=new Date(e._d+""),n=a.state.blackoutDates;n[t]={date:Object(Y.f)(r)},a.setState({blackoutDates:n})},a.deleteBlackoutDates=function(e){var t=a.state.blackoutDates;t.splice(e,1),a.setState({blackoutDates:t})},a.blackoutDateValidate=function(e){var t=a.state.blackoutDates,r=!1;return t.forEach(function(t){r=r||Object(Y.f)(e)===t.date}),Object(Y.z)(e)&&!r},a.handleError=function(e,t){var s,c=!0;if(t)for(var l in a.state.isFormReady)c=c&&a.state.isFormReady[l];a.setState({isFormReady:Object(n.a)({},a.state.isFormReady,(s={},Object(r.a)(s,e,t),Object(r.a)(s,"check",c&&t),s))})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;delete a.state.errors[n],a.setState(Object(r.a)({},n,s))},a.checkHourTierValidate=function(){var e=a.state.prices;e.forEach(function(t,s){var c="tier_".concat(s,"_hour");delete a.state.errors[c];var l=e[s]&&Number(e[s].hour),o=e[s-1]&&Number(e[s-1].hour),i=e[s+1]&&Number(e[s+1].hour);0===s?l&&i&&l>=i&&a.setState({errors:Object(n.a)({},a.state.errors,Object(r.a)({},c,["Data should be less than next Tier"]))}):s<3?o&&l&&l<=o?a.setState({errors:Object(n.a)({},a.state.errors,Object(r.a)({},c,["Data should be lager than previous Tier"]))}):l&&i&&l>=i&&a.setState({errors:Object(n.a)({},a.state.errors,Object(r.a)({},c,["Data should be less than next Tier"]))}):o&&l&&l<=o&&a.setState({errors:Object(n.a)({},a.state.errors,Object(r.a)({},c,["Data should be lager than previous Tier"]))})})},a.handleChangePricing=function(e){var t=e.target.name,r=Number(e.target.value),n=t.split("_")[1],s=t.split("_")[2],c=a.state.prices;c[n][s]=r,a.setState({prices:c},function(){"hour"===s&&a.checkHourTierValidate()})},a.handleChangeTime=function(e,t,r){var n=new Date(e._d+""),s=a.state.operatingHours;"closeTime"===r&&0===n.getHours()&&0===n.getMinutes()&&(n.setHours(23),n.setMinutes(59)),s[t][r]=Object(Y.u)(n,"HH:mm"),a.setState({operatingHours:s})},a.handleCheckTime=function(e){var t=a.state.operatingHours,r=e.target,n=r.name,s=r.checked;t[Number(n)].isUsable=s,a.setState({operatingHours:t})},a.convertListFileToMap=function(e){for(var t=[],a=0;a<e.length;a++)t.push({src:e[a]});return t},a.handleFile=function(e){var t=e.target,n=t.name,c=t.files,l=a.props.match.params.spaceId;if(a.convertListFileToMap(c).length){var o=new FormData;o.append("file",c[0]),$.a.addImage({id:l,data:o}).then(function(e){var t;N.b.success("Add image successfully");var c=a.state.spaceList;c.filter(function(e){return e.id===l})[0][n].push(e),a.setState((t={},Object(r.a)(t,n,[e].concat(Object(s.a)(a.state[n]))),Object(r.a)(t,"spaceList",c),t),function(){a.imageList.value=null})}).catch(function(e){N.b.error("Upload image failed")})}},a.handleDeleteFile=function(e,t){X.delete(e).then(function(e){N.b.success("Delete image successfully");var r=a.state.images;r.splice(t,1),a.setState({images:r})}).catch(function(){N.b.error("Delete image failed")})},a.handleError=function(e,t){var s,c=!0;if(t)for(var l in a.state.isFormReady)c=c&&a.state.isFormReady[l];a.setState({isFormReady:Object(n.a)({},a.state.isFormReady,(s={},Object(r.a)(s,e,t),Object(r.a)(s,"check",c&&t),s))})},a.selectSpace=function(e){var t=a.props.match.params.venueId,r=a.state.spaceList[e];a.setState(Object(n.a)({},a.getSpaceObject(r)),function(){a.props.history.push("/admin/venues/".concat(t,"/spaces/").concat(r.id))})},a.saveForm=function(e){e.preventDefault();var t=a.props.match.params.venueId,r=a.state,n=r.spaceId,s=r.name,c=r.floor,l=r.operatingHours,o=r.blackoutDates,i=r.prices,u={name:s,floor:c,operatingHours:JSON.stringify(l),blackoutDates:JSON.stringify(o.filter(function(e){return e.date&&!e.disabled})),prices:JSON.stringify(i),venue:t};$.a.update({id:n,data:u}).then(function(e){var t=a.state.spaceList.map(function(t){return t.id===n?e:t});a.setState({spaceList:t}),N.b.success("Update spaces successfully")}).catch(function(e){var t=e.response.data;a.setState({errors:t}),N.b.error("Update spaces failed")})},a.getBlackoutDateFromVenue=function(){var e=a.props.match.params.venueId;A.a.detail(e).then(function(e){var t=e.blackoutDates.map(function(e){return{date:e.date,disabled:!0}});a.setState({blackoutDates:[].concat(Object(s.a)(t),Object(s.a)(a.state.blackoutDates))})})},a.getTierSetting=function(){te.a.getTier().then(function(e){var t=e&&e.value.split(","),r=a.state.tier.map(function(e,a){return e.hour=Number(t[a]),e});a.setState({tier:r})})},a.getSpaceObject=function(e){try{var t=e.name,a=e.blackoutDates,r=e.floor,n=e.operatingHours,s=e.images,c=e.id,l=e.prices;return{name:t,blackoutDates:a,floor:r,operatingHours:n.map(function(e,t){return e.name=ae[t],e}),images:s,spaceId:c,prices:l}}catch(o){return null}},a.state={spaceId:null,name:null,images:[],floor:null,operatingHours:re,blackoutDates:[],errors:{},isFormReady:{},spaceList:[],prices:[],tier:ne},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,a=t.venueId,r=t.spaceId;a&&r&&A.a.spaces(a).then(function(t){if(t.result&&t.result.length>0){var a=t.result,s=a.filter(function(e){return e.id===r})[0];e.setState(Object(n.a)({},e.getSpaceObject(s),{spaceList:a,currentSpace:s}),function(){e.getBlackoutDateFromVenue(),e.getTierSetting()})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,r=t.blackoutDates,n=t.images,s=t.operatingHours,c=t.floor,l=t.errors,o=t.isFormReady,i=t.spaceList,u=t.spaceId,m=t.prices,p=t.tier;a&&n&&!k.a.isEmpty(r)&&!k.a.isEmpty(s)&&o.check;return d.a.createElement(d.a.Fragment,null,d.a.createElement(ee.a,{className:"modal-dialog-centered",isOpen:this.state.isDeleteVenue,toggle:this.toggleConfirmDelete,handle:this.deleteSpace,type:"Space"}),d.a.createElement(y.a,{className:"venues mt--12",fluid:!0},d.a.createElement(O.a,{className:"mb-4"},d.a.createElement(j.a,null,d.a.createElement(D.a,{onSubmit:this.saveForm},d.a.createElement(_.a,null,d.a.createElement(w.a,{md:"10",lg:"8",className:"order-2 order-sm-1"},d.a.createElement(C.a,{className:"row"},d.a.createElement(S.a,{className:"form-control-label",md:"3"},"Room Name"),d.a.createElement(w.a,{md:"5"},d.a.createElement(q.a,{required:!0,type:"text",name:"name",defaultValue:a,handleError:this.handleError,errors:l.name,onChange:this.handleChange}))),d.a.createElement(C.a,{className:"row"},d.a.createElement(S.a,{className:"form-control-label",md:"3"},"Image"),d.a.createElement(w.a,{md:"7"},d.a.createElement(O.a,{className:"align-items-center venues__image-slider mb-0"},n&&n.length>0?d.a.createElement(q.c,{listImage:n,handleDelete:this.handleDeleteFile}):d.a.createElement("div",{className:"venues__placeholder-image",onClick:function(){return e.imageList.click()}},d.a.createElement("div",{className:"venues__placeholder-image__label"},"No Image")),d.a.createElement("input",{ref:function(t){return e.imageList=t},onChange:this.handleFile,style:{display:"none"},type:"file",name:"images",id:"roomImage",accept:".jpg,.gif,.jpeg,.png",multiple:!0}),d.a.createElement(T.a,{className:"mt-3 w-30",color:"default",onClick:function(){return e.imageList.click()}},"Add Image"),d.a.createElement("div",{className:"error-text mt-3"},l.images)))),d.a.createElement(C.a,{className:"row"},d.a.createElement(S.a,{className:"form-control-label",md:"3"},"Comments"),d.a.createElement(w.a,{md:"5"},d.a.createElement(q.a,{required:!0,type:"text",name:"floor",defaultValue:c,handleError:this.handleError,errors:l.floor,onChange:this.handleChange}))),d.a.createElement(C.a,{className:"row"},d.a.createElement(S.a,{className:"form-control-label",md:"3"},"Hours"),d.a.createElement(w.a,{md:"5",className:"venues__openrating-hours"},d.a.createElement(F.a,{className:"venues__table-openrating-hours w-100"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{width:"50%"}),d.a.createElement("th",{width:"25%"},"Open"),d.a.createElement("th",{width:"25%"},"Close"))),d.a.createElement("tbody",null,s.map(function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",null,d.a.createElement("div",{className:"custom-control custom-checkbox"},d.a.createElement("input",{className:"custom-control-input",id:t.name,name:a,type:"checkbox",checked:t.isUsable,onChange:e.handleCheckTime}),d.a.createElement("label",{className:"custom-control-label text-capitalize",htmlFor:t.name},t.name))),d.a.createElement("td",null,d.a.createElement(v.a,{className:"venues__select-time",value:Object(Y.p)(t.startTime,"HH:mm"),timeFormat:!0,dateFormat:!1,closeOnSelect:!0,renderInput:e.renderInputTime,onChange:function(t){return e.handleChangeTime(t,a,"startTime")}})),d.a.createElement("td",null,d.a.createElement(v.a,{className:"venues__select-time",value:Object(Y.p)(t.closeTime,"HH:mm"),closeOnSelect:!0,timeFormat:!0,dateFormat:!1,onChange:function(t){return e.handleChangeTime(t,a,"closeTime")}})))}))),d.a.createElement("div",{className:"error-text mt-3"},l.operatingHours))),d.a.createElement(C.a,{className:"row"},d.a.createElement(S.a,{className:"form-control-label",htmlFor:"example-password-input",md:"3"},"Blackout Dates"),d.a.createElement(w.a,{md:"7",className:"venues__blackout-date ".concat(r.length>4?"venues__blackout-date--scroll":"")},d.a.createElement(_.a,{className:"mb-3"},d.a.createElement(w.a,{lg:"6"},d.a.createElement(T.a,{className:"w-5",color:"secondary",onClick:this.addBlackoutDates},"+"))),r.map(function(t,a){return d.a.createElement(_.a,{key:a,className:"mb-2"},d.a.createElement(w.a,{lg:"6",sm:"8",xs:"8"},d.a.createElement(v.a,{inputProps:{placeholder:"Date Picker",disabled:t.disabled},closeOnSelect:!0,timeFormat:!1,dateFormat:!0,value:Object(Y.p)(t.date,"YYYY:MM:DD"),onChange:function(t){return e.setBlackoutDates(t,a)},isValidDate:e.blackoutDateValidate})),!t.disabled&&d.a.createElement(w.a,{md:"2",xs:"2"},d.a.createElement(T.a,{className:"w-5",color:"secondary",onClick:function(){return e.deleteBlackoutDates(a)}},"\u2212")))}),d.a.createElement("div",{className:"error-text mt-3"},l.blackoutDates))),d.a.createElement(C.a,{className:"row"},d.a.createElement(S.a,{className:"form-control-label",md:"3"},"Pricing"),d.a.createElement(w.a,{md:"8",className:"venues__prices-section"},d.a.createElement(_.a,null,d.a.createElement(w.a,{lg:"6",sm:"8",xs:"8"},d.a.createElement(F.a,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{width:"10"},d.a.createElement("strong",null,"Tier")),d.a.createElement("th",{width:"20"},d.a.createElement("strong",null,"From (Hrs)")),d.a.createElement("th",{width:"20"},d.a.createElement("strong",null,"To (Hrs)")),d.a.createElement("th",{width:"50"},d.a.createElement("strong",null,"Cost ($)")))),d.a.createElement("tbody",null,m.map(function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",null,d.a.createElement("h5",{className:"venues__prices-section__item"},"Tier ".concat(t.tier))),d.a.createElement("td",null,d.a.createElement("h5",{className:"venues__prices-section__item"},a>0?p[a-1].hour&&p[a-1].hour+1:1)),d.a.createElement("td",null,d.a.createElement("strong",null,p[a].hour)),d.a.createElement("td",null,d.a.createElement(q.a,{regex:"number",required:!0,type:"text",placeholder:"$",name:"tier_".concat(a,"_cost"),value:t.cost,errors:l["tier_".concat(a,"_price")],onChange:e.handleChangePricing,handleError:e.handleError})))})))))))),d.a.createElement(w.a,{md:"2",lg:"4",className:"venues__list-rom order-1 order-sm-2 "},d.a.createElement("h3",{className:"form-control-label"},"Room list"),d.a.createElement(j.a,{className:"p-0"},d.a.createElement(B,{"data-toggle":"checklist",flush:!0},i.map(function(t,a){return d.a.createElement(J,{className:"py-2 px-2 cursor-pointer",key:a},d.a.createElement("div",{className:b()("checklist-item checklist-item-success",{"checklist-item--active":t.id===u}),onClick:function(){return e.selectSpace(a)}},d.a.createElement("div",{className:"checklist-info"},d.a.createElement("h5",{className:"checklist-title my-2"},t.name))))}))))),d.a.createElement(_.a,null,d.a.createElement(w.a,{md:"6",className:"my-3"},d.a.createElement(T.a,{color:"danger",onClick:this.toggleConfirmDelete},"Delete Space")),d.a.createElement(w.a,{md:"6",className:"my-3"},d.a.createElement(f.b,{to:"/admin/venues",className:"mr-3"},d.a.createElement(T.a,{color:"secondary"},"Cancel")),d.a.createElement(T.a,{color:"success",onClick:this.saveForm,disabled:!1},"Save Changes"))))))))}}]),t}(d.a.Component),ce={removeVenue:Z.c};t.default=Object(p.b)(null,ce)(se)},597:function(e,t,a){"use strict";var r=a(12),n=a(15),s=a(0),c=a.n(s),l=a(4),o=a.n(l),i=a(14),u=a.n(i),m=a(6),d={className:o.a.string,cssModule:o.a.object,size:o.a.string,bordered:o.a.bool,borderless:o.a.bool,striped:o.a.bool,dark:o.a.bool,hover:o.a.bool,responsive:o.a.oneOfType([o.a.bool,o.a.string]),tag:m.p,responsiveTag:m.p,innerRef:o.a.oneOfType([o.a.func,o.a.string,o.a.object])},p=function(e){var t=e.className,a=e.cssModule,s=e.size,l=e.bordered,o=e.borderless,i=e.striped,d=e.dark,p=e.hover,f=e.responsive,h=e.tag,b=e.responsiveTag,g=e.innerRef,v=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),E=Object(m.l)(u()(t,"table",!!s&&"table-"+s,!!l&&"table-bordered",!!o&&"table-borderless",!!i&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),a),k=c.a.createElement(h,Object(r.a)({},v,{ref:g,className:E}));if(f){var N=Object(m.l)(!0===f?"table-responsive":"table-responsive-"+f,a);return c.a.createElement(b,{className:N},k)}return k};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},t.a=p},635:function(e,t,a){"use strict";var r=a(2),n=a.n(r),s=a(7),c=a(10),l={headers:{"Content-Type":"multipart/form-data"}};t.a={update:function(){var e=Object(s.a)(n.a.mark(function e(t){var a,r,s,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,r=t.data,s="".concat("/spaces","/").concat(a),e.next=4,c.a.put(s,r);case 4:return l=e.sent,e.abrupt("return",l.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(s.a)(n.a.mark(function e(t){var a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/spaces","/").concat(t),e.next=3,c.a.delete(a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),addImage:function(){var e=Object(s.a)(n.a.mark(function e(t){var a,r,s,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.id,s="".concat("/spaces","/").concat(r,"/images"),e.next=4,c.a.post(s,a,l);case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),get:function(){var e=Object(s.a)(n.a.mark(function e(t){var a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/spaces","/").concat(t),e.next=3,c.a.get(a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},659:function(e,t,a){},748:function(e,t,a){"use strict";var r=a(2),n=a.n(r),s=a(7),c=a(10);t.a={getTier:function(){var e=Object(s.a)(n.a.mark(function e(){var t,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("/systemsettings","/provider_tiers"),e.next=3,c.a.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),setTier:function(){var e=Object(s.a)(n.a.mark(function e(t){var a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/systemsettings","/provider_tiers"),e.next=3,c.a.patch(a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},753:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var r=a(30),n=a(31),s=a(33),c=a(32),l=a(34),o=a(0),i=a.n(o),u=a(564),m=a(266),d=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.toggle,r=e.handle,n=e.type;return i.a.createElement(u.a,{className:"modal-dialog-centered",isOpen:t,toggle:a},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h6",{className:"modal-title",id:"modal-title-default"},"Confirm delete ".concat(n,"!")),i.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:a},i.a.createElement("span",{"aria-hidden":!0},"\xd7"))),i.a.createElement("div",{className:"modal-body"},i.a.createElement("p",null,"Do you want to delete this ".concat(n,"?"))),i.a.createElement("div",{className:"modal-footer"},i.a.createElement(m.a,{color:"danger",type:"button",onClick:r},"Delete"),i.a.createElement(m.a,{className:"ml-auto",color:"link","data-dismiss":"modal",type:"button",onClick:a},"Close")))}}]),t}(i.a.Component)}}]);
//# sourceMappingURL=31.7ccb734d.chunk.js.map